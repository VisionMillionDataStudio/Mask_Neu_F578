# è¡¨é¢ç¼ºé™·æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€å·¥ä¸šç”Ÿäº§çš„ä¸æ–­å‘å±•ï¼Œè¡¨é¢ç¼ºé™·æ£€æµ‹åœ¨åˆ¶é€ ä¸šä¸­çš„é‡è¦æ€§æ—¥ç›Šå‡¸æ˜¾ã€‚è¡¨é¢ç¼ºé™·ä¸ä»…å½±å“äº§å“çš„å¤–è§‚è´¨é‡ï¼Œè¿˜å¯èƒ½å¯¹äº§å“çš„æ€§èƒ½å’Œä½¿ç”¨å¯¿å‘½äº§ç”Ÿä¸¥é‡å½±å“ã€‚å› æ­¤ï¼ŒåŠæ—¶ã€å‡†ç¡®åœ°æ£€æµ‹å’Œè¯†åˆ«è¡¨é¢ç¼ºé™·ï¼Œæˆä¸ºæé«˜äº§å“è´¨é‡å’Œé™ä½ç”Ÿäº§æˆæœ¬çš„å…³é”®ç¯èŠ‚ã€‚ä¼ ç»Ÿçš„è¡¨é¢ç¼ºé™·æ£€æµ‹æ–¹æ³•ä¸»è¦ä¾èµ–äººå·¥ç›®è§†æ£€æŸ¥å’Œç®€å•çš„å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œè¿™äº›æ–¹æ³•ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”å®¹æ˜“å—åˆ°äººä¸ºå› ç´ çš„å½±å“ï¼Œå¯¼è‡´æ£€æµ‹ç»“æœçš„ä¸ç¨³å®šæ€§å’Œä¸å‡†ç¡®æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„è‡ªåŠ¨åŒ–æ£€æµ‹æŠ€æœ¯é€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ã€‚

YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹å› å…¶é«˜æ•ˆçš„å®æ—¶æ£€æµ‹èƒ½åŠ›å’Œè‰¯å¥½çš„æ£€æµ‹ç²¾åº¦ï¼Œå¹¿æ³›åº”ç”¨äºç›®æ ‡æ£€æµ‹é¢†åŸŸã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹çš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å°ç›®æ ‡æ£€æµ‹å’Œå¤æ‚èƒŒæ™¯ä¸‹çš„è¡¨ç°ã€‚é€šè¿‡å¯¹YOLOv8è¿›è¡Œæ”¹è¿›ï¼Œç»“åˆç‰¹å®šçš„è¡¨é¢ç¼ºé™·æ£€æµ‹éœ€æ±‚ï¼Œå¯ä»¥æœ‰æ•ˆæé«˜æ£€æµ‹ç³»ç»Ÿçš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆçš„è¡¨é¢ç¼ºé™·æ£€æµ‹ç³»ç»Ÿï¼Œä»¥æ»¡è¶³ç°ä»£åˆ¶é€ ä¸šå¯¹è´¨é‡æ§åˆ¶çš„ä¸¥æ ¼è¦æ±‚ã€‚

æœ¬ç ”ç©¶æ‰€ä½¿ç”¨çš„æ•°æ®é›†åŒ…å«1800å¼ å›¾åƒï¼Œæ¶µç›–äº†å…­ç§ä¸åŒç±»å‹çš„è¡¨é¢ç¼ºé™·ï¼ŒåŒ…æ‹¬ï¼šcrazingï¼ˆå¼€è£‚ï¼‰ã€inclusionï¼ˆå¤¹æ‚ç‰©ï¼‰ã€patchesï¼ˆæ–‘ç‚¹ï¼‰ã€pitted_surfaceï¼ˆå‡¹å‘è¡¨é¢ï¼‰ã€rolled-in_scaleï¼ˆå·å…¥é³ç‰‡ï¼‰å’Œscratchesï¼ˆåˆ’ç—•ï¼‰ã€‚è¿™äº›ç¼ºé™·ç±»å‹åœ¨å®é™…ç”Ÿäº§ä¸­è¾ƒä¸ºå¸¸è§ï¼Œä¸”å„è‡ªå…·æœ‰ä¸åŒçš„ç‰¹å¾å’Œè¡¨ç°å½¢å¼ã€‚é€šè¿‡å¯¹è¿™äº›ç¼ºé™·è¿›è¡Œæ·±å…¥åˆ†æå’Œå»ºæ¨¡ï¼Œå¯ä»¥ä¸ºæ”¹è¿›YOLOv8æä¾›ä¸°å¯Œçš„è®­ç»ƒæ•°æ®ï¼Œä»è€Œæå‡æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›å’Œæ³›åŒ–èƒ½åŠ›ã€‚

åœ¨ç ”ç©¶æ„ä¹‰æ–¹é¢ï¼Œé¦–å…ˆï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„è¡¨é¢ç¼ºé™·æ£€æµ‹ç³»ç»Ÿèƒ½å¤Ÿå®ç°å¯¹å¤šç§ç¼ºé™·ç±»å‹çš„å¿«é€Ÿã€å‡†ç¡®è¯†åˆ«ï¼Œæå¤§åœ°æé«˜äº†æ£€æµ‹æ•ˆç‡ï¼Œé™ä½äº†äººå·¥æˆæœ¬ã€‚å…¶æ¬¡ï¼Œè¯¥ç³»ç»Ÿçš„åº”ç”¨å¯ä»¥æœ‰æ•ˆå‡å°‘å› è¡¨é¢ç¼ºé™·å¯¼è‡´çš„äº§å“è¿”å·¥å’ŒæŠ¥åºŸï¼Œä»è€Œæå‡ä¼ä¸šçš„ç»æµæ•ˆç›Šå’Œå¸‚åœºç«äº‰åŠ›ã€‚æ­¤å¤–ï¼Œéšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œè¯¥ç³»ç»Ÿçš„ç ”ç©¶å’Œåº”ç”¨ä¹Ÿä¸ºç›¸å…³é¢†åŸŸçš„æŠ€æœ¯è¿›æ­¥æä¾›äº†æ–°çš„æ€è·¯å’Œæ–¹æ³•ï¼Œæ¨åŠ¨äº†æ™ºèƒ½åˆ¶é€ å’Œå·¥ä¸š4.0çš„è¿›ç¨‹ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„è¡¨é¢ç¼ºé™·æ£€æµ‹ç³»ç»Ÿä¸ä»…å…·æœ‰é‡è¦çš„ç†è®ºç ”ç©¶ä»·å€¼ï¼Œä¹Ÿå…·æœ‰å¹¿æ³›çš„å®é™…åº”ç”¨å‰æ™¯ã€‚é€šè¿‡æ·±å…¥æ¢è®¨å’Œç ”ç©¶è¯¥ç³»ç»Ÿçš„æ„å»ºä¸ä¼˜åŒ–ï¼Œèƒ½å¤Ÿä¸ºè¡¨é¢ç¼ºé™·æ£€æµ‹é¢†åŸŸæä¾›æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œæ¨åŠ¨ç›¸å…³æŠ€æœ¯çš„è¿›æ­¥å’Œå‘å±•ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1ZTtQeTEWJ/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 6
names: ['crazing', 'inclusion', 'patches', 'pitted_surface', 'rolled-in_scale', 'scratches']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†åä¸ºâ€œMask_Neu_Fâ€çš„æ•°æ®é›†ï¼Œä»¥è®­ç»ƒå’Œæ”¹è¿›YOLOv8æ¨¡å‹åœ¨è¡¨é¢ç¼ºé™·æ£€æµ‹ä¸­çš„æ€§èƒ½ã€‚è¯¥æ•°æ®é›†ä¸“é—¨é’ˆå¯¹å·¥ä¸šè¡¨é¢ç¼ºé™·çš„è¯†åˆ«ä¸åˆ†ç±»ï¼Œæ¶µç›–äº†å…­ç§ä¸åŒç±»å‹çš„ç¼ºé™·ï¼Œåˆ†åˆ«ä¸ºï¼šcrazingï¼ˆè¡¨é¢å¼€è£‚ï¼‰ã€inclusionï¼ˆå¤¹æ‚ç‰©ï¼‰ã€patchesï¼ˆæ–‘ç‚¹ï¼‰ã€pitted_surfaceï¼ˆå‡¹å‘è¡¨é¢ï¼‰ã€rolled-in_scaleï¼ˆå·å…¥çš„é³ç‰‡ï¼‰å’Œscratchesï¼ˆåˆ’ç—•ï¼‰ã€‚è¿™äº›ç¼ºé™·åœ¨åˆ¶é€ å’ŒåŠ å·¥è¿‡ç¨‹ä¸­å¸¸å¸¸ä¼šå½±å“äº§å“çš„è´¨é‡å’Œå¤–è§‚ï¼Œå› æ­¤ï¼Œå‡†ç¡®è¯†åˆ«å’Œåˆ†ç±»è¿™äº›ç¼ºé™·å¯¹äºæé«˜äº§å“çš„åˆæ ¼ç‡å’Œå®¢æˆ·æ»¡æ„åº¦è‡³å…³é‡è¦ã€‚

â€œMask_Neu_Fâ€æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œç¡®ä¿äº†æ•°æ®çš„å¤šæ ·æ€§å’Œä»£è¡¨æ€§ã€‚æ¯ç§ç¼ºé™·ç±»å‹éƒ½åŒ…å«äº†å¤§é‡çš„æ ·æœ¬ï¼Œæ¶µç›–äº†ä¸åŒçš„æè´¨ã€å…‰ç…§æ¡ä»¶å’Œè§†è§’å˜åŒ–ï¼Œä»¥æ¨¡æ‹Ÿå®é™…ç”Ÿäº§ç¯å¢ƒä¸­çš„å„ç§æƒ…å†µã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿå­¦ä¹ åˆ°æ›´ä¸ºä¸°å¯Œçš„ç‰¹å¾ï¼Œä»è€Œæé«˜å…¶åœ¨çœŸå®åœºæ™¯ä¸­çš„æ³›åŒ–èƒ½åŠ›ã€‚æ•°æ®é›†ä¸­çš„å›¾åƒç»è¿‡ç²¾ç¡®æ ‡æ³¨ï¼Œç¡®ä¿æ¯ä¸ªç¼ºé™·éƒ½è¢«æ¸…æ™°åœ°æ¡†å®šï¼Œå¹¶é™„æœ‰ç›¸åº”çš„ç±»åˆ«æ ‡ç­¾ï¼Œä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†å¯é çš„åŸºç¡€ã€‚

åœ¨æ•°æ®é›†çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ•°æ®å¢å¼ºæŠ€æœ¯ï¼Œä»¥è¿›ä¸€æ­¥æå‡æ¨¡å‹çš„é²æ£’æ€§ã€‚é€šè¿‡å¯¹åŸå§‹å›¾åƒè¿›è¡Œæ—‹è½¬ã€ç¼©æ”¾ã€è£å‰ªå’Œé¢œè‰²è°ƒæ•´ç­‰æ“ä½œï¼Œæˆ‘ä»¬èƒ½å¤Ÿç”Ÿæˆæ›´å¤šçš„è®­ç»ƒæ ·æœ¬ï¼Œä»è€Œä½¿æ¨¡å‹åœ¨é¢å¯¹æœªè§è¿‡çš„ç¼ºé™·æ—¶ï¼Œä¾ç„¶èƒ½å¤Ÿä¿æŒè¾ƒé«˜çš„è¯†åˆ«å‡†ç¡®ç‡ã€‚è¿™ç§æ–¹æ³•ä¸ä»…å¢åŠ äº†æ•°æ®é›†çš„æœ‰æ•ˆæ ·æœ¬æ•°é‡ï¼Œè¿˜å¸®åŠ©æ¨¡å‹å­¦ä¹ åˆ°ä¸åŒç¼ºé™·åœ¨å„ç§æ¡ä»¶ä¸‹çš„è¡¨ç°å½¢å¼ï¼Œå¢å¼ºäº†å…¶å¯¹å¤æ‚ç¯å¢ƒçš„é€‚åº”èƒ½åŠ›ã€‚

åœ¨æ¨¡å‹è®­ç»ƒçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†â€œMask_Neu_Fâ€æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼Œä»¥ä¾¿äºå¯¹æ¨¡å‹çš„æ€§èƒ½è¿›è¡Œå…¨é¢è¯„ä¼°ã€‚è®­ç»ƒé›†ç”¨äºæ¨¡å‹çš„å­¦ä¹ ï¼ŒéªŒè¯é›†ç”¨äºè°ƒä¼˜è¶…å‚æ•°ï¼Œè€Œæµ‹è¯•é›†åˆ™ç”¨äºæœ€ç»ˆçš„æ€§èƒ½è¯„ä¼°ã€‚é€šè¿‡è¿™ç§åˆ’åˆ†ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®ä¿æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„è¿‡æ‹Ÿåˆç°è±¡å¾—åˆ°æœ‰æ•ˆæ§åˆ¶ï¼Œå¹¶èƒ½å¤Ÿåœ¨æœªè§è¿‡çš„æ•°æ®ä¸Šè¿›è¡ŒçœŸå®çš„æ€§èƒ½æµ‹è¯•ã€‚

æ­¤å¤–ï¼Œä¸ºäº†æ›´å¥½åœ°è¯„ä¼°æ¨¡å‹çš„æ£€æµ‹æ•ˆæœï¼Œæˆ‘ä»¬é‡‡ç”¨äº†å¤šç§è¯„ä»·æŒ‡æ ‡ï¼ŒåŒ…æ‹¬å‡†ç¡®ç‡ã€å¬å›ç‡å’ŒF1-scoreç­‰ã€‚è¿™äº›æŒ‡æ ‡èƒ½å¤Ÿå…¨é¢åæ˜ æ¨¡å‹åœ¨ä¸åŒç¼ºé™·ç±»å‹ä¸Šçš„è¡¨ç°ï¼Œå¸®åŠ©æˆ‘ä»¬è¯†åˆ«æ¨¡å‹çš„ä¼˜ç¼ºç‚¹ï¼Œå¹¶ä¸ºåç»­çš„æ”¹è¿›æä¾›ä¾æ®ã€‚é€šè¿‡å¯¹â€œMask_Neu_Fâ€æ•°æ®é›†çš„æ·±å…¥åˆ†æå’Œå®éªŒï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¤Ÿæ˜¾è‘—æå‡YOLOv8åœ¨è¡¨é¢ç¼ºé™·æ£€æµ‹ä¸­çš„æ€§èƒ½ï¼Œæ¨åŠ¨å·¥ä¸šè‡ªåŠ¨åŒ–æ£€æµ‹æŠ€æœ¯çš„å‘å±•ã€‚

æ€»ä¹‹ï¼Œâ€œMask_Neu_Fâ€æ•°æ®é›†ä¸ä»…ä¸ºè¡¨é¢ç¼ºé™·æ£€æµ‹æä¾›äº†ä¸°å¯Œçš„æ ·æœ¬å’Œæ ‡æ³¨ä¿¡æ¯ï¼Œä¹Ÿä¸ºæ”¹è¿›YOLOv8æ¨¡å‹çš„è®­ç»ƒå’Œè¯„ä¼°æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å¯¹è¯¥æ•°æ®é›†çš„å……åˆ†åˆ©ç”¨ï¼Œæˆ‘ä»¬ç›¸ä¿¡èƒ½å¤Ÿå®ç°æ›´é«˜æ•ˆã€æ›´å‡†ç¡®çš„è¡¨é¢ç¼ºé™·æ£€æµ‹ç³»ç»Ÿï¼Œä¸ºå·¥ä¸šç”Ÿäº§çš„è´¨é‡æ§åˆ¶æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ç®—æ³•æ˜¯ç”±Glenn-Jocheräº2023å¹´1æœˆæå‡ºçš„ä¸€ç§å…ˆè¿›çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæ‰¿è¢­äº†YOLOç³»åˆ—ç®—æ³•çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œå°¤å…¶æ˜¯YOLOv3å’ŒYOLOv5çš„è®¾è®¡ç†å¿µï¼ŒåŒæ—¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†å¤šé¡¹é‡è¦çš„æ”¹è¿›å’Œåˆ›æ–°ã€‚YOLOv8çš„æ¨å‡ºæ ‡å¿—ç€ç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„åˆä¸€æ¬¡é£è·ƒï¼Œå…¶åœ¨ç²¾åº¦å’Œé€Ÿåº¦ä¸Šçš„ä¼˜è¶Šè¡¨ç°ä½¿å…¶æˆä¸ºè®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­çš„ä¸€é¢—ç’€ç’¨æ˜ç ã€‚

åœ¨æ•°æ®é¢„å¤„ç†æ–¹é¢ï¼ŒYOLOv8å»¶ç»­äº†YOLOv5çš„æˆåŠŸç­–ç•¥ï¼Œé‡‡ç”¨äº†å¤šç§æ•°æ®å¢å¼ºæŠ€æœ¯ï¼Œä»¥æé«˜æ¨¡å‹çš„é²æ£’æ€§å’Œæ³›åŒ–èƒ½åŠ›ã€‚è¿™äº›å¢å¼ºæ‰‹æ®µåŒ…æ‹¬é©¬èµ›å…‹å¢å¼ºã€æ··åˆå¢å¼ºã€ç©ºé—´æ‰°åŠ¨å’Œé¢œè‰²æ‰°åŠ¨ç­‰ã€‚é©¬èµ›å…‹å¢å¼ºé€šè¿‡å°†å¤šå¼ å›¾åƒæ‹¼æ¥åœ¨ä¸€èµ·ï¼Œå¢åŠ äº†è®­ç»ƒæ ·æœ¬çš„å¤šæ ·æ€§ï¼›æ··åˆå¢å¼ºåˆ™é€šè¿‡å°†ä¸åŒå›¾åƒè¿›è¡Œæ··åˆï¼Œè¿›ä¸€æ­¥ä¸°å¯Œäº†æ•°æ®é›†ï¼›ç©ºé—´æ‰°åŠ¨å’Œé¢œè‰²æ‰°åŠ¨åˆ™é€šè¿‡éšæœºå˜æ¢å›¾åƒçš„ç©ºé—´ç»“æ„å’Œé¢œè‰²ç‰¹å¾ï¼Œå¢å¼ºäº†æ¨¡å‹å¯¹ä¸åŒç¯å¢ƒå’Œæ¡ä»¶çš„é€‚åº”èƒ½åŠ›ã€‚è¿™äº›æ•°æ®é¢„å¤„ç†æŠ€æœ¯çš„ç»“åˆï¼Œä½¿å¾—YOLOv8åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰åˆ°ç›®æ ‡çš„ç‰¹å¾ï¼Œæé«˜äº†æ¨¡å‹çš„æ£€æµ‹ç²¾åº¦ã€‚

åœ¨éª¨å¹²ç½‘ç»œç»“æ„æ–¹é¢ï¼ŒYOLOv8å€Ÿé‰´äº†YOLOv5çš„è®¾è®¡ç†å¿µï¼Œä½†è¿›è¡Œäº†é‡è¦çš„è°ƒæ•´ã€‚YOLOv5çš„ä¸»å¹²ç½‘ç»œé‡‡ç”¨äº†C3æ¨¡å—ï¼Œé€šè¿‡é€å±‚é™é‡‡æ ·å’Œç‰¹å¾å¼ºåŒ–æ¥æå–ç‰¹å¾ã€‚è€Œåœ¨YOLOv8ä¸­ï¼ŒC3æ¨¡å—è¢«æ›´æ–°ä¸ºC2fæ¨¡å—ï¼Œè¿™ä¸€æ–°æ¨¡å—å¼•å…¥äº†æ›´å¤šçš„åˆ†æ”¯ï¼Œä¸°å¯Œäº†æ¢¯åº¦å›ä¼ æ—¶çš„æ”¯æµï¼Œä»è€Œæé«˜äº†ç‰¹å¾æå–çš„æ•ˆç‡å’Œæ•ˆæœã€‚C2fæ¨¡å—çš„è®¾è®¡ä½¿å¾—ç½‘ç»œåœ¨å¤„ç†ç‰¹å¾æ—¶èƒ½å¤Ÿæ›´åŠ çµæ´»å’Œé«˜æ•ˆï¼Œè¿›è€Œæå‡äº†æ•´ä½“çš„æ£€æµ‹æ€§èƒ½ã€‚

YOLOv8ä¾ç„¶é‡‡ç”¨äº†ç‰¹å¾é‡‘å­—å¡”ç½‘ç»œï¼ˆFPNï¼‰å’Œè·¯å¾„èšåˆç½‘ç»œï¼ˆPANï¼‰çš„ç»“æ„ï¼Œä»¥å®ç°å¤šå°ºåº¦ä¿¡æ¯çš„å……åˆ†èåˆã€‚FPNå’ŒPANçš„ç»“åˆä½¿å¾—YOLOv8èƒ½å¤Ÿåœ¨ä¸åŒå°ºåº¦ä¸Šæœ‰æ•ˆåœ°æ•æ‰ç›®æ ‡ç‰¹å¾ï¼Œè¿›è€Œæå‡å¯¹å°ç›®æ ‡çš„æ£€æµ‹èƒ½åŠ›ã€‚å°½ç®¡YOLOv8åœ¨FPN-PANç»“æ„ä¸­æ›¿æ¢äº†C3æ¨¡å—ä¸ºC2fæ¨¡å—ï¼Œä½†æ•´ä½“ç»“æ„ä¸YOLOv5ä¿æŒä¸€è‡´ï¼Œç¡®ä¿äº†ç‰¹å¾ä¿¡æ¯çš„æœ‰æ•ˆä¼ é€’å’Œèåˆã€‚

åœ¨æ£€æµ‹å¤´çš„è®¾è®¡ä¸Šï¼ŒYOLOv8é‡‡ç”¨äº†â€œè§£è€¦å¤´â€çš„ç»“æ„ï¼Œè¿™ä¸€è®¾è®¡æ˜¯YOLOç³»åˆ—çš„ä¸€æ¬¡é‡è¦å˜é©ã€‚ä¸YOLOv3å’ŒYOLOv5çš„è€¦åˆå¤´ä¸åŒï¼Œè§£è€¦å¤´å°†åˆ†ç±»å’Œå®šä½ä»»åŠ¡åˆ†å¼€å¤„ç†ï¼Œé€šè¿‡ä¸¤æ¡å¹¶è¡Œçš„åˆ†æ”¯åˆ†åˆ«æå–ç±»åˆ«ç‰¹å¾å’Œä½ç½®ç‰¹å¾ã€‚è¿™æ ·çš„è®¾è®¡ä¸ä»…æé«˜äº†æ¨¡å‹çš„çµæ´»æ€§ï¼Œè¿˜å¢å¼ºäº†å¯¹å¤æ‚åœºæ™¯çš„é€‚åº”èƒ½åŠ›ã€‚è§£è€¦å¤´çš„å¼•å…¥ä½¿å¾—YOLOv8åœ¨åˆ†ç±»å’Œå®šä½çš„ä»»åŠ¡ä¸Šèƒ½å¤Ÿç‹¬ç«‹ä¼˜åŒ–ï¼Œä»è€Œå®ç°æ›´é«˜çš„æ£€æµ‹ç²¾åº¦ã€‚

åœ¨æ ‡ç­¾åˆ†é…ç­–ç•¥æ–¹é¢ï¼ŒYOLOv8å¼•å…¥äº†åŠ¨æ€æ ‡ç­¾åˆ†é…ç­–ç•¥ï¼Œè§£å†³äº†æ­£è´Ÿæ ·æœ¬åŒ¹é…çš„å¤šå°ºåº¦åˆ†é…é—®é¢˜ã€‚ä¸YOLOXä½¿ç”¨çš„SimOTAä¸åŒï¼ŒYOLOv8é‡‡ç”¨äº†ä¸YOLOv6ç›¸åŒçš„TOODç­–ç•¥ï¼Œç®€åŒ–äº†æ ‡ç­¾åˆ†é…çš„è¿‡ç¨‹ã€‚YOLOv8çš„æŸå¤±å‡½æ•°ä¸»è¦ç”±ç±»åˆ«æŸå¤±å’Œä½ç½®æŸå¤±ç»„æˆï¼Œå…¶ä¸­ç±»åˆ«æŸå¤±é‡‡ç”¨äº†å˜ç„¦æŸå¤±ï¼ˆVFL Lossï¼‰ï¼Œè€Œå›å½’æŸå¤±åˆ™ç»“åˆäº†CIoULosså’ŒDFLLossã€‚VFL Lossé€šè¿‡ä¸å¯¹ç§°å‚æ•°å¯¹æ­£è´Ÿæ ·æœ¬è¿›è¡ŒåŠ æƒï¼Œä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒæ—¶èƒ½å¤Ÿæ›´åŠ å…³æ³¨é«˜è´¨é‡çš„æ­£æ ·æœ¬ï¼Œä»è€Œæé«˜äº†æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚

YOLOv8çš„è®¾è®¡ä¸ä»…åœ¨ç†è®ºä¸Šè¿›è¡Œäº†æ·±å…¥çš„æ¢è®¨ï¼Œæ›´åœ¨å®è·µä¸­å±•ç°å‡ºäº†å“è¶Šçš„æ€§èƒ½ã€‚é€šè¿‡ç»“åˆYOLOv5ã€YOLOv6ã€YOLOXç­‰æ¨¡å‹çš„ä¼˜ç‚¹ï¼ŒYOLOv8åœ¨å®æ—¶ç›®æ ‡æ£€æµ‹é¢†åŸŸè¾¾åˆ°äº†æ–°çš„é«˜åº¦ã€‚å…¶é«˜ç²¾åº¦å’Œå¿«é€Ÿçš„æ£€æµ‹é€Ÿåº¦ï¼Œä½¿å¾—YOLOv8åœ¨å„ç±»åº”ç”¨åœºæ™¯ä¸­éƒ½å±•ç°å‡ºäº†å¼ºå¤§çš„ç”Ÿå‘½åŠ›ï¼Œå°¤å…¶æ˜¯åœ¨è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–çš„åº”ç”¨ä¸­ï¼Œå¦‚è‡ªåŠ¨é©¾é©¶ã€æ™ºèƒ½ç›‘æ§ç­‰é¢†åŸŸã€‚

æ€»çš„æ¥è¯´ï¼ŒYOLOv8ç®—æ³•é€šè¿‡å¯¹æ•°æ®é¢„å¤„ç†ã€éª¨å¹²ç½‘ç»œã€ç‰¹å¾èåˆã€æ£€æµ‹å¤´å’Œæ ‡ç­¾åˆ†é…ç­–ç•¥ç­‰å¤šä¸ªæ–¹é¢çš„æ”¹è¿›ï¼Œå½¢æˆäº†ä¸€ç§æ›´åŠ é«˜æ•ˆã€å‡†ç¡®çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚å…¶åˆ›æ–°çš„è®¾è®¡ç†å¿µå’Œå“è¶Šçš„æ€§èƒ½ï¼Œä½¿å¾—YOLOv8ä¸ä»…æ˜¯YOLOç³»åˆ—çš„æœ€æ–°ä»£è¡¨ï¼Œæ›´æ˜¯è®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­çš„ä¸€é¡¹é‡è¦çªç ´ã€‚éšç€YOLOv8çš„å¹¿æ³›åº”ç”¨ï¼Œç›®æ ‡æ£€æµ‹æŠ€æœ¯å°†è¿æ¥æ–°çš„å‘å±•æœºé‡ï¼Œä¸ºå„è¡Œå„ä¸šçš„æ™ºèƒ½åŒ–è¿›ç¨‹æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\data\loaders.py

ä»¥ä¸‹æ˜¯å¯¹ä»£ç ä¸­æœ€æ ¸å¿ƒéƒ¨åˆ†çš„æå–å’Œè¯¦ç»†ä¸­æ–‡æ³¨é‡Šï¼š

```python
import cv2
import numpy as np
import torch
from threading import Thread
from urllib.parse import urlparse

class LoadStreams:
    """
    ç”¨äºåŠ è½½å„ç§ç±»å‹è§†é¢‘æµçš„ç±»ã€‚

    æ”¯æŒ RTSPã€RTMPã€HTTP å’Œ TCP æµçš„å®æ—¶æ•è·ã€‚

    å±æ€§:
        sources (str): è§†é¢‘æµçš„è¾“å…¥è·¯å¾„æˆ– URLã€‚
        imgsz (int): å¤„ç†å›¾åƒçš„å¤§å°ï¼Œé»˜è®¤ä¸º 640ã€‚
        vid_stride (int): è§†é¢‘å¸§ç‡æ­¥å¹…ï¼Œé»˜è®¤ä¸º 1ã€‚
        running (bool): è¡¨ç¤ºæµçº¿ç¨‹æ˜¯å¦æ­£åœ¨è¿è¡Œçš„æ ‡å¿—ã€‚
        imgs (list): æ¯ä¸ªæµçš„å›¾åƒå¸§åˆ—è¡¨ã€‚
        fps (list): æ¯ä¸ªæµçš„å¸§ç‡åˆ—è¡¨ã€‚
        frames (list): æ¯ä¸ªæµçš„æ€»å¸§æ•°åˆ—è¡¨ã€‚
        threads (list): æ¯ä¸ªæµçš„çº¿ç¨‹åˆ—è¡¨ã€‚
        caps (list): æ¯ä¸ªæµçš„ cv2.VideoCapture å¯¹è±¡åˆ—è¡¨ã€‚
    """

    def __init__(self, sources='file.streams', imgsz=640, vid_stride=1):
        """åˆå§‹åŒ–å®ä¾‹å˜é‡å¹¶æ£€æŸ¥è¾“å…¥æµå½¢çŠ¶çš„ä¸€è‡´æ€§ã€‚"""
        self.running = True  # çº¿ç¨‹è¿è¡Œæ ‡å¿—
        self.imgsz = imgsz
        self.vid_stride = vid_stride  # è§†é¢‘å¸§ç‡æ­¥å¹…
        sources = [sources]  # å°†è¾“å…¥æºè½¬æ¢ä¸ºåˆ—è¡¨
        self.sources = sources  # å­˜å‚¨æºè·¯å¾„
        self.imgs, self.fps, self.frames, self.threads, self.caps = [[]], [0], [0], [None], [None]  # åˆå§‹åŒ–å±æ€§

        for i, s in enumerate(sources):  # éå†æ¯ä¸ªæº
            self.caps[i] = cv2.VideoCapture(s)  # åˆ›å»ºè§†é¢‘æ•è·å¯¹è±¡
            if not self.caps[i].isOpened():
                raise ConnectionError(f'æ— æ³•æ‰“å¼€ {s}')  # å¦‚æœæ— æ³•æ‰“å¼€ï¼ŒæŠ›å‡ºå¼‚å¸¸

            # è·å–è§†é¢‘çš„å®½åº¦ã€é«˜åº¦å’Œå¸§ç‡
            w = int(self.caps[i].get(cv2.CAP_PROP_FRAME_WIDTH))
            h = int(self.caps[i].get(cv2.CAP_PROP_FRAME_HEIGHT))
            fps = self.caps[i].get(cv2.CAP_PROP_FPS)
            self.frames[i] = max(int(self.caps[i].get(cv2.CAP_PROP_FRAME_COUNT)), 0) or float('inf')  # æ€»å¸§æ•°
            self.fps[i] = max((fps if fps > 0 else 30), 30)  # å¸§ç‡ï¼Œé»˜è®¤ä¸º 30

            success, im = self.caps[i].read()  # è¯»å–ç¬¬ä¸€å¸§
            if not success or im is None:
                raise ConnectionError(f'æ— æ³•ä» {s} è¯»å–å›¾åƒ')  # å¦‚æœè¯»å–å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸

            self.imgs[i].append(im)  # å°†ç¬¬ä¸€å¸§æ·»åŠ åˆ°å›¾åƒåˆ—è¡¨
            self.threads[i] = Thread(target=self.update, args=([i, self.caps[i], s]), daemon=True)  # å¯åŠ¨çº¿ç¨‹è¯»å–å¸§
            self.threads[i].start()  # å¯åŠ¨çº¿ç¨‹

    def update(self, i, cap, stream):
        """åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­è¯»å–æµ `i` çš„å¸§ã€‚"""
        while self.running and cap.isOpened():
            cap.grab()  # æŠ“å–å¸§
            if len(self.imgs[i]) < 30:  # ä¿æŒç¼“å†²åŒºä¸è¶…è¿‡ 30 å¸§
                success, im = cap.retrieve()  # è·å–å¸§
                if not success:
                    im = np.zeros((self.imgsz, self.imgsz, 3), dtype=np.uint8)  # å¦‚æœå¤±è´¥ï¼Œåˆ›å»ºç©ºå›¾åƒ
                self.imgs[i].append(im)  # å°†å›¾åƒæ·»åŠ åˆ°åˆ—è¡¨

    def close(self):
        """å…³é—­æµåŠ è½½å™¨å¹¶é‡Šæ”¾èµ„æºã€‚"""
        self.running = False  # åœæ­¢çº¿ç¨‹
        for thread in self.threads:
            if thread.is_alive():
                thread.join(timeout=5)  # ç­‰å¾…çº¿ç¨‹ç»“æŸ
        for cap in self.caps:
            cap.release()  # é‡Šæ”¾è§†é¢‘æ•è·å¯¹è±¡

    def __iter__(self):
        """è¿”å›è¿­ä»£å™¨å¯¹è±¡ã€‚"""
        self.count = -1
        return self

    def __next__(self):
        """è¿”å›æºè·¯å¾„ã€è½¬æ¢åçš„å›¾åƒå’ŒåŸå§‹å›¾åƒä»¥ä¾›å¤„ç†ã€‚"""
        self.count += 1
        images = []
        for i, x in enumerate(self.imgs):
            while not x:  # ç­‰å¾…å¸§å¯ç”¨
                time.sleep(1 / min(self.fps))  # ç­‰å¾…ç›´åˆ°å¸§å¯ç”¨
                x = self.imgs[i]

            images.append(x.pop(0))  # è·å–å¹¶ç§»é™¤ç¬¬ä¸€å¸§

        return self.sources, images, None, ''  # è¿”å›æºè·¯å¾„å’Œå›¾åƒ

    def __len__(self):
        """è¿”å›æºå¯¹è±¡çš„é•¿åº¦ã€‚"""
        return len(self.sources)  # è¿”å›æºçš„æ•°é‡
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†åˆ†æ
1. **LoadStreams ç±»**ï¼šè¿™ä¸ªç±»è´Ÿè´£åŠ è½½å’Œå¤„ç†è§†é¢‘æµã€‚å®ƒæ”¯æŒå¤šç§è§†é¢‘æºï¼ŒåŒ…æ‹¬ RTSPã€RTMPã€HTTP å’Œæœ¬åœ°æ‘„åƒå¤´ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨åˆå§‹åŒ–æ—¶ï¼Œç±»ä¼šå°è¯•æ‰“å¼€è§†é¢‘æºå¹¶è¯»å–ç¬¬ä¸€å¸§ï¼Œä»¥ç¡®ä¿è§†é¢‘æµå¯ç”¨ã€‚
3. **æ›´æ–°æ–¹æ³•**ï¼šè¿™æ˜¯ä¸€ä¸ªåå°çº¿ç¨‹æ–¹æ³•ï¼Œè´Ÿè´£ä¸æ–­æŠ“å–è§†é¢‘æµä¸­çš„å¸§å¹¶å°†å…¶å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­ã€‚
4. **å…³é—­æ–¹æ³•**ï¼šè´Ÿè´£åœæ­¢çº¿ç¨‹å¹¶é‡Šæ”¾è§†é¢‘æ•è·å¯¹è±¡ï¼Œç¡®ä¿èµ„æºå¾—åˆ°æ­£ç¡®é‡Šæ”¾ã€‚
5. **è¿­ä»£å™¨æ–¹æ³•**ï¼šå®ç°äº†è¿­ä»£å™¨åè®®ï¼Œä½¿å¾—è¯¥ç±»å¯ä»¥è¢«ç”¨äºå¾ªç¯éå†ï¼Œè¿”å›æ¯ä¸€å¸§å›¾åƒã€‚

### æ€»ç»“
è¿™ä¸ªä»£ç ç‰‡æ®µæ˜¯ YOLOv8 æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸“æ³¨äºè§†é¢‘æµçš„åŠ è½½å’Œå¤„ç†ï¼Œç¡®ä¿èƒ½å¤Ÿå®æ—¶è·å–è§†é¢‘å¸§ä»¥ä¾›åç»­çš„ç›®æ ‡æ£€æµ‹ç­‰ä»»åŠ¡ã€‚

è¿™ä¸ªæ–‡ä»¶æ˜¯YOLOv8ç®—æ³•çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸»è¦è´Ÿè´£åŠ è½½ä¸åŒç±»å‹çš„æ•°æ®æºï¼ŒåŒ…æ‹¬è§†é¢‘æµã€æˆªå›¾ã€å›¾åƒæ–‡ä»¶ç­‰ï¼Œä»¥ä¾¿è¿›è¡Œç›®æ ‡æ£€æµ‹ã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†å¤šä¸ªç±»ï¼Œæ¯ä¸ªç±»è´Ÿè´£å¤„ç†ä¸åŒçš„æ•°æ®åŠ è½½æ–¹å¼ã€‚

é¦–å…ˆï¼Œ`SourceTypes`ç±»ç”¨äºè¡¨ç¤ºè¾“å…¥æºçš„ç±»å‹ï¼ŒåŒ…æ‹¬ç½‘ç»œæ‘„åƒå¤´ã€æˆªå›¾ã€å›¾åƒæ–‡ä»¶å’Œå¼ é‡ç­‰ã€‚æ¥ä¸‹æ¥æ˜¯`LoadStreams`ç±»ï¼Œå®ƒè´Ÿè´£ä»å„ç§è§†é¢‘æµä¸­åŠ è½½æ•°æ®ï¼Œæ”¯æŒRTSPã€RTMPã€HTTPå’ŒTCPæµã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°åˆå§‹åŒ–äº†ä¸€äº›å‚æ•°ï¼Œå¦‚å›¾åƒå¤§å°ã€è§†é¢‘å¸§ç‡æ­¥å¹…ç­‰ï¼Œå¹¶é€šè¿‡å¤šçº¿ç¨‹è¯»å–è§†é¢‘æµçš„å¸§ã€‚å®ƒè¿˜æä¾›äº†`update`æ–¹æ³•æ¥æŒç»­è¯»å–è§†é¢‘å¸§ï¼Œå¹¶åœ¨éœ€è¦æ—¶é‡å¯æµã€‚`close`æ–¹æ³•ç”¨äºå…³é—­æµå¹¶é‡Šæ”¾èµ„æºã€‚

`LoadScreenshots`ç±»åˆ™ä¸“æ³¨äºä»å±å¹•æ•è·æˆªå›¾ï¼Œæ”¯æŒæŒ‡å®šæ•è·åŒºåŸŸçš„å‚æ•°ã€‚å®ƒä½¿ç”¨`mss`åº“æ¥å®ç°å±å¹•æ•è·ï¼Œå¹¶æä¾›äº†è¿­ä»£å™¨æ–¹æ³•æ¥é€å¸§è¿”å›æ•è·çš„å›¾åƒã€‚

`LoadImages`ç±»ç”¨äºåŠ è½½å›¾åƒå’Œè§†é¢‘æ–‡ä»¶ï¼Œæ”¯æŒä»å•ä¸ªæ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶æˆ–å›¾åƒè·¯å¾„åˆ—è¡¨ä¸­è¯»å–æ•°æ®ã€‚å®ƒä¼šæ ¹æ®æ–‡ä»¶çš„æ‰©å±•ååˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œå¹¶åœ¨è¯»å–è§†é¢‘æ—¶ä½¿ç”¨OpenCVçš„`VideoCapture`å¯¹è±¡ã€‚

`LoadPilAndNumpy`ç±»ç”¨äºä»PILå›¾åƒå’ŒNumpyæ•°ç»„ä¸­åŠ è½½å›¾åƒæ•°æ®ï¼Œç¡®ä¿è¾“å…¥å›¾åƒæ ¼å¼æ­£ç¡®å¹¶è¿›è¡Œå¿…è¦çš„è½¬æ¢ã€‚å®ƒæ”¯æŒæ‰¹å¤„ç†å›¾åƒã€‚

`LoadTensor`ç±»åˆ™ä¸“æ³¨äºä»PyTorchå¼ é‡ä¸­åŠ è½½å›¾åƒæ•°æ®ï¼Œç¡®ä¿è¾“å…¥å¼ é‡çš„å½¢çŠ¶å’Œæ•°æ®èŒƒå›´ç¬¦åˆè¦æ±‚ã€‚

æ­¤å¤–ï¼Œæ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†`autocast_list`å‡½æ•°ï¼Œç”¨äºå°†ä¸åŒç±»å‹çš„è¾“å…¥æºåˆå¹¶ä¸ºNumpyæ•°ç»„æˆ–PILå›¾åƒåˆ—è¡¨ã€‚`get_best_youtube_url`å‡½æ•°åˆ™ç”¨äºä»YouTubeè§†é¢‘ä¸­æå–æœ€ä½³è´¨é‡çš„MP4è§†é¢‘æµURLã€‚

æœ€åï¼Œ`LOADERS`å…ƒç»„å°†æ‰€æœ‰åŠ è½½å™¨ç±»ç»„åˆåœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ã€‚æ•´ä¸ªæ–‡ä»¶çš„è®¾è®¡æ—¨åœ¨ä¸ºYOLOv8æä¾›çµæ´»ä¸”é«˜æ•ˆçš„æ•°æ®åŠ è½½èƒ½åŠ›ï¼Œä»¥æ”¯æŒå„ç§è¾“å…¥æºçš„ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚

#### 11.2 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤å¹¶ç­‰å¾…å…¶å®Œæˆ
    result = subprocess.run(command, shell=True)
    
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦‚æœè¿”å›ç ä¸ä¸º0ï¼Œåˆ™è¡¨ç¤ºå‡ºé”™
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬å

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚
   - `subprocess`ï¼šç”¨äºåˆ›å»ºæ–°è¿›ç¨‹ã€è¿æ¥åˆ°å®ƒä»¬çš„è¾“å…¥/è¾“å‡º/é”™è¯¯ç®¡é“ï¼Œå¹¶è·å¾—è¿”å›ç ã€‚

2. **`run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªè„šæœ¬è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå¹¶ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡Œè¯¥è„šæœ¬ã€‚
   - `python_path = sys.executable`ï¼šè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œä»¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Python ç¯å¢ƒã€‚
   - `command`ï¼šæ„å»ºè¦æ‰§è¡Œçš„å‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - `subprocess.run(command, shell=True)`ï¼šæ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚
   - `if result.returncode != 0`ï¼šæ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º0ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

3. **ä¸»ç¨‹åºéƒ¨åˆ†**ï¼š
   - `if __name__ == "__main__":`ï¼šç¡®ä¿è¯¥éƒ¨åˆ†ä»£ç ä»…åœ¨ç›´æ¥è¿è¡Œè„šæœ¬æ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¢«å¯¼å…¥æ—¶æ‰§è¡Œã€‚
   - `script_path = "web.py"`ï¼šæŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬æ–‡ä»¶åã€‚
   - `run_script(script_path)`ï¼šè°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥è„šæœ¬è·¯å¾„ä»¥æ‰§è¡Œã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶åä¸º `ui.py`ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ˜¯ä¸€ä¸ªåä¸º `web.py` çš„ Streamlit åº”ç”¨ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ã€‚`sys` æ¨¡å—ç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ï¼Œ`os` æ¨¡å—æä¾›äº†ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½ï¼Œè€Œ `subprocess` æ¨¡å—åˆ™ç”¨äºåˆ›å»ºæ–°è¿›ç¨‹ã€è¿æ¥åˆ°å®ƒä»¬çš„è¾“å…¥/è¾“å‡º/é”™è¯¯ç®¡é“ï¼Œå¹¶è·å–å®ƒä»¬çš„è¿”å›ç ã€‚

æ¥ä¸‹æ¥ï¼Œç¨‹åºä» `QtFusion.path` æ¨¡å—ä¸­å¯¼å…¥äº† `abs_path` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è·å–ç»™å®šè·¯å¾„çš„ç»å¯¹è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œç¨‹åºæ¥æ”¶ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¿™ä¸ªå‚æ•°æ˜¯è¦è¿è¡Œçš„è„šæœ¬çš„è·¯å¾„ã€‚å‡½æ•°é¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨ `python_path` å˜é‡ä¸­ã€‚ç„¶åï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit run` å‘½ä»¤æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™ä¸ªå‘½ä»¤å°†è¢«ä¼ é€’ç»™ `subprocess.run` å‡½æ•°ï¼Œä»¥åœ¨ä¸€ä¸ªæ–°çš„ shell ä¸­æ‰§è¡Œã€‚

æ‰§è¡Œå‘½ä»¤åï¼Œç¨‹åºæ£€æŸ¥è¿”å›ç ã€‚å¦‚æœè¿”å›ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œç¨‹åºä¼šæ‰“å°å‡ºâ€œè„šæœ¬è¿è¡Œå‡ºé”™ã€‚â€çš„æç¤ºä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` è¯­å¥æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¯¥è„šæœ¬æ—¶æ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ã€‚ç¨‹åºæŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼Œè¿™é‡Œä½¿ç”¨ `abs_path` å‡½æ•°è·å– `web.py` çš„ç»å¯¹è·¯å¾„ã€‚æœ€åï¼Œè°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„åŠŸèƒ½æ˜¯ç®€æ´æ˜äº†çš„ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å¯åŠ¨ä¸€ä¸ª Streamlit åº”ç”¨ï¼Œç¡®ä¿ä½¿ç”¨çš„æ˜¯å½“å‰ Python ç¯å¢ƒï¼Œå¹¶å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚

#### 11.3 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\nn\__init__.py

```python
# å¯¼å…¥æ‰€éœ€çš„æ¨¡å‹å’Œå·¥å…·å‡½æ•°
from .tasks import (BaseModel, ClassificationModel, DetectionModel, SegmentationModel, 
                    attempt_load_one_weight, attempt_load_weights, guess_model_scale, 
                    guess_model_task, parse_model, torch_safe_load, yaml_model_load)

# å®šä¹‰æ¨¡å—çš„å…¬å¼€æ¥å£ï¼ŒæŒ‡å®šå¯ä»¥è¢«å¤–éƒ¨è®¿é—®çš„å‡½æ•°å’Œç±»
__all__ = ('attempt_load_one_weight', 'attempt_load_weights', 'parse_model', 'yaml_model_load', 
           'guess_model_task', 'guess_model_scale', 'torch_safe_load', 
           'DetectionModel', 'SegmentationModel', 'ClassificationModel', 'BaseModel')
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†åŠæ³¨é‡Š

1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `from .tasks import ...`ï¼šä»å½“å‰åŒ…çš„ `tasks` æ¨¡å—ä¸­å¯¼å…¥å¤šä¸ªç±»å’Œå‡½æ•°ã€‚è¿™äº›ç±»å’Œå‡½æ•°æ˜¯å®ç°æ¨¡å‹åŠ è½½ã€è§£æå’Œæ¨ç†çš„æ ¸å¿ƒåŠŸèƒ½ã€‚

2. **å®šä¹‰å…¬å¼€æ¥å£**ï¼š
   - `__all__`ï¼šè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œç”¨äºå®šä¹‰æ¨¡å—çš„å…¬å…±æ¥å£ã€‚å®ƒåˆ—å‡ºäº†åœ¨ä½¿ç”¨ `from module import *` æ—¶å¯ä»¥å¯¼å…¥çš„åç§°ã€‚è¿™æ ·åšå¯ä»¥æ§åˆ¶å“ªäº›éƒ¨åˆ†æ˜¯æ¨¡å—çš„å…¬å…± APIï¼Œé¿å…å¤–éƒ¨è®¿é—®ä¸å¿…è¦çš„å†…éƒ¨å®ç°ã€‚

### ä¸»è¦åŠŸèƒ½
- **æ¨¡å‹ç±»**ï¼š
  - `BaseModel`ï¼šåŸºç¡€æ¨¡å‹ç±»ï¼Œå¯èƒ½åŒ…å«æ‰€æœ‰æ¨¡å‹çš„å…±é€šåŠŸèƒ½ã€‚
  - `ClassificationModel`ï¼šåˆ†ç±»æ¨¡å‹ç±»ï¼Œç”¨äºå›¾åƒåˆ†ç±»ä»»åŠ¡ã€‚
  - `DetectionModel`ï¼šæ£€æµ‹æ¨¡å‹ç±»ï¼Œç”¨äºç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚
  - `SegmentationModel`ï¼šåˆ†å‰²æ¨¡å‹ç±»ï¼Œç”¨äºå›¾åƒåˆ†å‰²ä»»åŠ¡ã€‚

- **å·¥å…·å‡½æ•°**ï¼š
  - `attempt_load_one_weight`ï¼šå°è¯•åŠ è½½å•ä¸ªæƒé‡æ–‡ä»¶ã€‚
  - `attempt_load_weights`ï¼šå°è¯•åŠ è½½å¤šä¸ªæƒé‡æ–‡ä»¶ã€‚
  - `guess_model_scale`ï¼šæ ¹æ®è¾“å…¥ä¿¡æ¯æ¨æµ‹æ¨¡å‹çš„è§„æ¨¡ã€‚
  - `guess_model_task`ï¼šæ ¹æ®è¾“å…¥ä¿¡æ¯æ¨æµ‹æ¨¡å‹çš„ä»»åŠ¡ç±»å‹ã€‚
  - `parse_model`ï¼šè§£ææ¨¡å‹ç»“æ„ã€‚
  - `torch_safe_load`ï¼šå®‰å…¨åŠ è½½ PyTorch æ¨¡å‹ã€‚
  - `yaml_model_load`ï¼šä» YAML æ–‡ä»¶åŠ è½½æ¨¡å‹é…ç½®ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç®—æ³•çš„ä¸€éƒ¨åˆ†ï¼Œå…·ä½“æ˜¯Ultralytics YOLOçš„ä¸€ä¸ªæ¨¡å—ï¼Œæ–‡ä»¶åä¸º`__init__.py`ï¼Œå®ƒä¸»è¦ç”¨äºåˆå§‹åŒ–åŒ…çš„å†…å®¹ã€‚æ–‡ä»¶ä¸­é¦–å…ˆåŒ…å«äº†ä¸€æ¡ç‰ˆæƒå£°æ˜ï¼Œè¡¨æ˜è¯¥ä»£ç éµå¾ªAGPL-3.0è®¸å¯è¯ã€‚

æ¥ä¸‹æ¥ï¼Œæ–‡ä»¶é€šè¿‡ç›¸å¯¹å¯¼å…¥çš„æ–¹å¼å¼•å…¥äº†å¤šä¸ªæ¨¡å‹å’Œå‡½æ•°ã€‚è¿™äº›æ¨¡å‹åŒ…æ‹¬åŸºç¡€æ¨¡å‹ï¼ˆBaseModelï¼‰ã€åˆ†ç±»æ¨¡å‹ï¼ˆClassificationModelï¼‰ã€æ£€æµ‹æ¨¡å‹ï¼ˆDetectionModelï¼‰å’Œåˆ†å‰²æ¨¡å‹ï¼ˆSegmentationModelï¼‰ã€‚æ­¤å¤–ï¼Œè¿˜å¼•å…¥äº†ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œä¾‹å¦‚`attempt_load_one_weight`å’Œ`attempt_load_weights`ï¼Œè¿™äº›å‡½æ•°å¯èƒ½ç”¨äºåŠ è½½æ¨¡å‹æƒé‡ï¼›`guess_model_scale`å’Œ`guess_model_task`ç”¨äºæ¨æµ‹æ¨¡å‹çš„è§„æ¨¡å’Œä»»åŠ¡ç±»å‹ï¼›`parse_model`ç”¨äºè§£ææ¨¡å‹ç»“æ„ï¼›`torch_safe_load`å’Œ`yaml_model_load`åˆ™å¯èƒ½ä¸å®‰å…¨åŠ è½½PyTorchæ¨¡å‹å’ŒåŠ è½½YAMLæ ¼å¼çš„æ¨¡å‹é…ç½®ç›¸å…³ã€‚

æœ€åï¼Œ`__all__`å˜é‡å®šä¹‰äº†è¯¥æ¨¡å—å…¬å¼€çš„æ¥å£ï¼Œåˆ—å‡ºäº†å¯ä»¥è¢«å¤–éƒ¨è®¿é—®çš„å‡½æ•°å’Œç±»ã€‚è¿™ç§åšæ³•æœ‰åŠ©äºæ§åˆ¶æ¨¡å—çš„å‘½åç©ºé—´ï¼Œç¡®ä¿ç”¨æˆ·åªæ¥è§¦åˆ°å¿…è¦çš„éƒ¨åˆ†ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯YOLOv8ç®—æ³•å®ç°çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæä¾›äº†æ¨¡å‹å’ŒåŠŸèƒ½çš„ç»„ç»‡ç»“æ„ã€‚

#### 11.4 code\ultralytics\models\yolo\pose\__init__.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
# å¯¼å…¥å¿…è¦çš„æ¨¡å—
from .predict import PosePredictor  # å¯¼å…¥å§¿æ€é¢„æµ‹å™¨
from .train import PoseTrainer      # å¯¼å…¥å§¿æ€è®­ç»ƒå™¨
from .val import PoseValidator      # å¯¼å…¥å§¿æ€éªŒè¯å™¨

# å®šä¹‰æ¨¡å—çš„å…¬å¼€æ¥å£
__all__ = "PoseTrainer", "PoseValidator", "PosePredictor"  # æŒ‡å®šåœ¨ä½¿ç”¨ 'from module import *' æ—¶ï¼Œå“ªäº›ç±»æˆ–å‡½æ•°æ˜¯å¯ç”¨çš„
```

### æ³¨é‡Šè¯´æ˜ï¼š
1. **æ¨¡å—å¯¼å…¥**ï¼š
   - `from .predict import PosePredictor`ï¼šä»å½“å‰åŒ…ä¸­å¯¼å…¥ `PosePredictor` ç±»ï¼Œè´Ÿè´£è¿›è¡Œå§¿æ€é¢„æµ‹ã€‚
   - `from .train import PoseTrainer`ï¼šä»å½“å‰åŒ…ä¸­å¯¼å…¥ `PoseTrainer` ç±»ï¼Œè´Ÿè´£è®­ç»ƒå§¿æ€æ¨¡å‹ã€‚
   - `from .val import PoseValidator`ï¼šä»å½“å‰åŒ…ä¸­å¯¼å…¥ `PoseValidator` ç±»ï¼Œè´Ÿè´£éªŒè¯å§¿æ€æ¨¡å‹çš„æ€§èƒ½ã€‚

2. **å…¬å¼€æ¥å£å®šä¹‰**ï¼š
   - `__all__` æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œç”¨äºå®šä¹‰å½“ä½¿ç”¨ `from module import *` æ—¶ï¼Œå“ªäº›åç§°æ˜¯å¯ä»¥è¢«å¯¼å…¥çš„ã€‚åœ¨è¿™é‡Œï¼ŒæŒ‡å®šäº† `PoseTrainer`ã€`PoseValidator` å’Œ `PosePredictor` ä¸‰ä¸ªç±»ä¸ºæ¨¡å—çš„å…¬å¼€æ¥å£ï¼Œè¡¨ç¤ºè¿™äº›ç±»æ˜¯æ¨¡å—çš„ä¸»è¦åŠŸèƒ½éƒ¨åˆ†ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªPythonæ¨¡å—çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º`__init__.py`ï¼Œå®ƒä½äº`code/ultralytics/models/yolo/pose/`ç›®å½•ä¸‹ã€‚è¯¥æ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å®šä¹‰æ¨¡å—çš„å…¬å…±æ¥å£ï¼Œå¹¶å¯¼å…¥ç›¸å…³çš„ç±»æˆ–å‡½æ•°ï¼Œä»¥ä¾¿åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶é¡¶éƒ¨çš„æ³¨é‡Š`# Ultralytics YOLO ğŸš€, AGPL-3.0 license`è¡¨æ˜è¯¥æ¨¡å—å±äºUltralytics YOLOé¡¹ç›®ï¼Œå¹¶ä¸”ä½¿ç”¨AGPL-3.0è®¸å¯è¯ã€‚è¿™æ˜¯ä¸€ä¸ªå¼€æºè®¸å¯è¯ï¼Œå…è®¸ç”¨æˆ·è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ä»£ç ï¼Œä½†è¦æ±‚åœ¨åˆ†å‘æ—¶ä¹Ÿå¿…é¡»å¼€æ”¾æºä»£ç ã€‚

æ¥ä¸‹æ¥ï¼Œæ–‡ä»¶é€šè¿‡`from .predict import PosePredictor`ã€`from .train import PoseTrainer`å’Œ`from .val import PoseValidator`è¿™ä¸‰è¡Œä»£ç å¯¼å…¥äº†ä¸‰ä¸ªç±»ï¼š`PosePredictor`ã€`PoseTrainer`å’Œ`PoseValidator`ã€‚è¿™äº›ç±»åˆ†åˆ«ç”¨äºå§¿æ€é¢„æµ‹ã€è®­ç»ƒå’ŒéªŒè¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ¨¡å—å¯ä»¥å°†è¿™äº›åŠŸèƒ½é›†ä¸­åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç”¨æˆ·è¿›è¡Œå§¿æ€ä¼°è®¡ç›¸å…³çš„æ“ä½œã€‚

æœ€åï¼Œ`__all__`å˜é‡è¢«å®šä¹‰ä¸ºä¸€ä¸ªå…ƒç»„ï¼ŒåŒ…å«äº†å­—ç¬¦ä¸²`"PoseTrainer"`ã€`"PoseValidator"`å’Œ`"PosePredictor"`ã€‚è¿™ä¸ªå˜é‡çš„ä½œç”¨æ˜¯æŒ‡å®šå½“ä½¿ç”¨`from module import *`è¯­å¥æ—¶ï¼Œå“ªäº›åç§°ä¼šè¢«å¯¼å…¥ã€‚è¿™æ ·å¯ä»¥æ§åˆ¶æ¨¡å—çš„å…¬å…±æ¥å£ï¼Œé¿å…ä¸å¿…è¦çš„å†…éƒ¨å®ç°ç»†èŠ‚è¢«æš´éœ²ç»™ç”¨æˆ·ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ª`__init__.py`æ–‡ä»¶çš„ä½œç”¨æ˜¯ç»„ç»‡å’Œå¯¼å‡ºä¸å§¿æ€ä¼°è®¡ç›¸å…³çš„åŠŸèƒ½ï¼Œä½¿å¾—ç”¨æˆ·åœ¨ä½¿ç”¨è¿™ä¸ªæ¨¡å—æ—¶èƒ½å¤Ÿæ–¹ä¾¿åœ°è®¿é—®æ‰€éœ€çš„ç±»å’ŒåŠŸèƒ½ã€‚

#### 11.5 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\yolo\pose\predict.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
from ultralytics.engine.results import Results  # å¯¼å…¥ç»“æœå¤„ç†ç±»
from ultralytics.models.yolo.detect.predict import DetectionPredictor  # å¯¼å…¥æ£€æµ‹é¢„æµ‹å™¨åŸºç±»
from ultralytics.utils import DEFAULT_CFG, LOGGER, ops  # å¯¼å…¥é»˜è®¤é…ç½®ã€æ—¥å¿—è®°å½•å™¨å’Œæ“ä½œå·¥å…·

class PosePredictor(DetectionPredictor):
    """
    PosePredictorç±»ï¼Œæ‰©å±•äº†DetectionPredictorç±»ï¼Œç”¨äºåŸºäºå§¿æ€æ¨¡å‹çš„é¢„æµ‹ã€‚
    """

    def __init__(self, cfg=DEFAULT_CFG, overrides=None, _callbacks=None):
        """åˆå§‹åŒ–PosePredictorï¼Œè®¾ç½®ä»»åŠ¡ä¸º'pose'å¹¶è®°å½•ä½¿ç”¨'mps'ä½œä¸ºè®¾å¤‡çš„è­¦å‘Šã€‚"""
        super().__init__(cfg, overrides, _callbacks)  # è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
        self.args.task = 'pose'  # è®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºå§¿æ€æ£€æµ‹
        # æ£€æŸ¥è®¾å¤‡ç±»å‹ï¼Œå¦‚æœæ˜¯'mps'ï¼Œåˆ™å‘å‡ºè­¦å‘Š
        if isinstance(self.args.device, str) and self.args.device.lower() == 'mps':
            LOGGER.warning("WARNING âš ï¸ Apple MPS known Pose bug. Recommend 'device=cpu' for Pose models. "
                           'See https://github.com/ultralytics/ultralytics/issues/4031.')

    def postprocess(self, preds, img, orig_imgs):
        """å¯¹ç»™å®šè¾“å…¥å›¾åƒæˆ–å›¾åƒåˆ—è¡¨è¿”å›æ£€æµ‹ç»“æœã€‚"""
        # åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰ä»¥è¿‡æ»¤é‡å çš„æ£€æµ‹æ¡†
        preds = ops.non_max_suppression(preds,
                                        self.args.conf,  # ç½®ä¿¡åº¦é˜ˆå€¼
                                        self.args.iou,  # IOUé˜ˆå€¼
                                        agnostic=self.args.agnostic_nms,  # æ˜¯å¦ç±»åˆ«æ— å…³çš„NMS
                                        max_det=self.args.max_det,  # æœ€å¤§æ£€æµ‹æ¡†æ•°é‡
                                        classes=self.args.classes,  # é€‰æ‹©çš„ç±»åˆ«
                                        nc=len(self.model.names))  # ç±»åˆ«æ•°é‡

        # å¦‚æœè¾“å…¥å›¾åƒä¸æ˜¯åˆ—è¡¨ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºnumpyæ•°ç»„
        if not isinstance(orig_imgs, list):
            orig_imgs = ops.convert_torch2numpy_batch(orig_imgs)

        results = []  # å­˜å‚¨ç»“æœçš„åˆ—è¡¨
        for i, pred in enumerate(preds):  # éå†æ¯ä¸ªé¢„æµ‹ç»“æœ
            orig_img = orig_imgs[i]  # è·å–åŸå§‹å›¾åƒ
            # å°†é¢„æµ‹æ¡†çš„åæ ‡ç¼©æ”¾åˆ°åŸå§‹å›¾åƒçš„å°ºå¯¸
            pred[:, :4] = ops.scale_boxes(img.shape[2:], pred[:, :4], orig_img.shape).round()
            # è·å–å…³é”®ç‚¹é¢„æµ‹ï¼Œå¹¶è¿›è¡Œåæ ‡ç¼©æ”¾
            pred_kpts = pred[:, 6:].view(len(pred), *self.model.kpt_shape) if len(pred) else pred[:, 6:]
            pred_kpts = ops.scale_coords(img.shape[2:], pred_kpts, orig_img.shape)
            img_path = self.batch[0][i]  # è·å–å›¾åƒè·¯å¾„
            # å°†ç»“æœæ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­
            results.append(
                Results(orig_img, path=img_path, names=self.model.names, boxes=pred[:, :6], keypoints=pred_kpts))
        return results  # è¿”å›æ‰€æœ‰ç»“æœ
```

### ä»£ç è¯´æ˜ï¼š
1. **PosePredictorç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºå§¿æ€æ£€æµ‹çš„é¢„æµ‹å™¨ç±»ï¼Œç»§æ‰¿è‡ª`DetectionPredictor`ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨åˆå§‹åŒ–æ—¶ï¼Œè®¾ç½®ä»»åŠ¡ç±»å‹ä¸ºå§¿æ€æ£€æµ‹ï¼Œå¹¶æ£€æŸ¥è®¾å¤‡ç±»å‹ä»¥å‘å‡ºè­¦å‘Šã€‚
3. **åå¤„ç†æ–¹æ³•**ï¼šè¯¥æ–¹æ³•è´Ÿè´£å¯¹æ¨¡å‹çš„é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ï¼ŒåŒ…æ‹¬åº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ã€ç¼©æ”¾æ£€æµ‹æ¡†å’Œå…³é”®ç‚¹åæ ‡ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åœ¨`Results`å¯¹è±¡ä¸­ã€‚æœ€ç»ˆè¿”å›å¤„ç†åçš„ç»“æœåˆ—è¡¨ã€‚

è¯¥ç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹ä¸­çš„ä¸€ä¸ªç”¨äºå§¿æ€é¢„æµ‹çš„ç±»ï¼Œåä¸º`PosePredictor`ã€‚å®ƒç»§æ‰¿è‡ª`DetectionPredictor`ç±»ï¼Œä¸“é—¨ç”¨äºå¤„ç†åŸºäºå§¿æ€æ¨¡å‹çš„é¢„æµ‹ä»»åŠ¡ã€‚

åœ¨æ–‡ä»¶çš„å¼€å¤´ï¼Œå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œç±»ï¼ŒåŒ…æ‹¬`Results`ã€`DetectionPredictor`å’Œä¸€äº›å·¥å…·å‡½æ•°ã€‚`Results`ç±»ç”¨äºå­˜å‚¨å’Œå¤„ç†é¢„æµ‹ç»“æœï¼Œè€Œ`DetectionPredictor`æ˜¯ä¸€ä¸ªé€šç”¨çš„æ£€æµ‹é¢„æµ‹å™¨ï¼Œæä¾›äº†åŸºç¡€çš„æ£€æµ‹åŠŸèƒ½ã€‚

`PosePredictor`ç±»çš„æ„é€ å‡½æ•°`__init__`æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š`cfg`ï¼ˆé…ç½®ï¼‰ï¼Œ`overrides`ï¼ˆè¦†ç›–é…ç½®ï¼‰ï¼Œå’Œ`_callbacks`ï¼ˆå›è°ƒå‡½æ•°ï¼‰ã€‚åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶å°†ä»»åŠ¡ç±»å‹è®¾ç½®ä¸º'pose'ï¼Œè¡¨ç¤ºè¯¥é¢„æµ‹å™¨å°†ç”¨äºå§¿æ€ä¼°è®¡ã€‚æ­¤å¤–ï¼Œå¦‚æœè®¾å¤‡ç±»å‹è¢«è®¾ç½®ä¸º'MPS'ï¼ˆAppleçš„Metal Performance Shadersï¼‰ï¼Œåˆ™ä¼šå‘å‡ºè­¦å‘Šï¼Œå»ºè®®ä½¿ç”¨'cpu'è®¾å¤‡ï¼Œå› ä¸ºåœ¨ä½¿ç”¨MPSæ—¶å·²çŸ¥å­˜åœ¨ä¸€äº›å§¿æ€æ¨¡å‹çš„bugã€‚

`postprocess`æ–¹æ³•ç”¨äºå¤„ç†æ¨¡å‹çš„é¢„æµ‹ç»“æœã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š`preds`ï¼ˆé¢„æµ‹ç»“æœï¼‰ï¼Œ`img`ï¼ˆè¾“å…¥å›¾åƒï¼‰ï¼Œå’Œ`orig_imgs`ï¼ˆåŸå§‹å›¾åƒï¼‰ã€‚é¦–å…ˆï¼Œè¯¥æ–¹æ³•è°ƒç”¨`non_max_suppression`å‡½æ•°å¯¹é¢„æµ‹ç»“æœè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œä»¥å»é™¤å†—ä½™çš„æ£€æµ‹æ¡†ã€‚æ¥ç€ï¼Œå¦‚æœè¾“å…¥çš„åŸå§‹å›¾åƒä¸æ˜¯åˆ—è¡¨æ ¼å¼ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºNumPyæ•°ç»„ã€‚

æ¥ä¸‹æ¥ï¼Œæ–¹æ³•ä¼šéå†æ¯ä¸ªé¢„æµ‹ç»“æœï¼Œå¹¶å¯¹æ¯ä¸ªé¢„æµ‹æ¡†è¿›è¡Œåæ ‡ç¼©æ”¾ï¼Œä»¥é€‚åº”åŸå§‹å›¾åƒçš„å°ºå¯¸ã€‚ç„¶åæå–å…³é”®ç‚¹ä¿¡æ¯ï¼Œå¹¶åŒæ ·è¿›è¡Œåæ ‡ç¼©æ”¾ã€‚æœ€åï¼Œå°†å¤„ç†åçš„ç»“æœå°è£…åˆ°`Results`å¯¹è±¡ä¸­ï¼ŒåŒ…æ‹¬åŸå§‹å›¾åƒã€å›¾åƒè·¯å¾„ã€æ¨¡å‹åç§°ã€æ£€æµ‹æ¡†å’Œå…³é”®ç‚¹ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ç»“æœå­˜å‚¨åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­è¿”å›ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¯¥æ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å®ç°åŸºäºYOLOv8æ¨¡å‹çš„å§¿æ€é¢„æµ‹ï¼Œå¹¶å¯¹é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ï¼Œä»¥ä¾¿äºè¿›ä¸€æ­¥åˆ†æå’Œä½¿ç”¨ã€‚

#### 11.6 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    DetectionTrainerç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œå¯ä»¥æ˜¯'train'æˆ–'val'ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…é€‚ç”¨äº'rect'æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æ˜¯'train'æˆ–'val'
        with torch_distributed_zero_first(rank):  # ä»…åœ¨DDPæƒ…å†µä¸‹åˆå§‹åŒ–æ•°æ®é›†*.cacheä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True'ä¸DataLoaderçš„shuffleä¸å…¼å®¹ï¼Œè®¾ç½®shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬ç§»åˆ°è®¾å¤‡å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©å°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼
            batch["img"] = imgs  # æ›´æ–°å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›YOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›ç”¨äºYOLOæ¨¡å‹éªŒè¯çš„DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )  # è¿”å›éªŒè¯å™¨

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )  # ç»˜åˆ¶å›¾åƒ

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è§£é‡Šï¼š
1. **DetectionTrainerç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒYOLOæ£€æµ‹æ¨¡å‹çš„ç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ã€‚
2. **build_datasetæ–¹æ³•**ï¼šæ„å»ºYOLOæ•°æ®é›†ï¼Œå¤„ç†å›¾åƒè·¯å¾„å’Œå¢å¼ºæ¨¡å¼ã€‚
3. **get_dataloaderæ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œè®¾ç½®æ‰¹æ¬¡å¤§å°å’Œå·¥ä½œçº¿ç¨‹æ•°ã€‚
4. **preprocess_batchæ–¹æ³•**ï¼šå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¤šå°ºåº¦è°ƒæ•´ã€‚
5. **get_modelæ–¹æ³•**ï¼šè¿”å›YOLOæ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **get_validatoræ–¹æ³•**ï¼šè¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„æ£€æµ‹éªŒè¯å™¨ã€‚
7. **plot_training_sampleså’Œplot_metricsæ–¹æ³•**ï¼šç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒæŒ‡æ ‡ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚ç¨‹åºçš„ä¸»è¦åŠŸèƒ½æ˜¯æ„å»ºæ•°æ®é›†ã€åŠ è½½æ•°æ®ã€é¢„å¤„ç†å›¾åƒã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€è¿›è¡ŒéªŒè¯ã€è®°å½•æŸå¤±ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ·±åº¦å­¦ä¹ ç›¸å…³çš„ PyTorch æ¨¡å—ï¼Œä»¥åŠ YOLO ç›¸å…³çš„åŠŸèƒ½æ¨¡å—ã€‚æ¥ç€ï¼Œå®šä¹‰äº† `DetectionTrainer` ç±»ï¼Œè¿™ä¸ªç±»ä¸»è¦è´Ÿè´£è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„é¡¹ä»»åŠ¡ã€‚

åœ¨ `build_dataset` æ–¹æ³•ä¸­ï¼Œç¨‹åºæ ¹æ®ç»™å®šçš„å›¾åƒè·¯å¾„å’Œæ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ„å»º YOLO æ•°æ®é›†ã€‚è¯¥æ–¹æ³•è¿˜å…è®¸ç”¨æˆ·ä¸ºä¸åŒæ¨¡å¼è‡ªå®šä¹‰æ•°æ®å¢å¼ºç­–ç•¥ã€‚`get_dataloader` æ–¹æ³•åˆ™ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒæ—¶åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ï¼Œå¹¶æ ¹æ®æ¨¡å¼è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®é¡ºåºã€‚

`preprocess_batch` æ–¹æ³•è´Ÿè´£å¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°é€‚å½“çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚è¯¥æ–¹æ³•è¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒå¤§å°æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ç­‰ï¼Œä»¥ç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†è¾“å…¥æ•°æ®ã€‚`get_model` æ–¹æ³•åˆ™ç”¨äºè¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯ä»¥åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚

åœ¨éªŒè¯è¿‡ç¨‹ä¸­ï¼Œ`get_validator` æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨äºæ¨¡å‹éªŒè¯çš„ `DetectionValidator` å®ä¾‹ï¼Œè®°å½•æŸå¤±é¡¹çš„åç§°ä»¥ä¾¿åç»­åˆ†æã€‚`label_loss_items` æ–¹æ³•ç”¨äºç”Ÿæˆä¸€ä¸ªåŒ…å«è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ï¼Œæ–¹ä¾¿ç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–ã€‚

`progress_string` æ–¹æ³•è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒæ•°æ®çš„è´¨é‡ã€‚

æœ€åï¼Œ`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†ææ¨¡å‹çš„è®­ç»ƒæ•ˆæœå’Œæ€§èƒ½ã€‚

æ•´ä½“è€Œè¨€ï¼Œè¿™ä¸ªç¨‹åºæ–‡ä»¶ä¸º YOLO æ¨¡å‹çš„è®­ç»ƒæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹æ„å»ºã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOv8çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ä»¥æ”¯æŒæ¨¡å‹çš„è®­ç»ƒã€éªŒè¯å’Œæ¨ç†ã€‚æ•´ä½“æ¶æ„åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼Œç¡®ä¿ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚ä¸»è¦æ¨¡å—åŒ…æ‹¬æ•°æ®åŠ è½½ã€æ¨¡å‹å®šä¹‰ã€è®­ç»ƒè¿‡ç¨‹ã€éªŒè¯è¿‡ç¨‹å’Œç”¨æˆ·ç•Œé¢ç­‰ã€‚

- **æ•°æ®åŠ è½½**ï¼šé€šè¿‡`loaders.py`æ–‡ä»¶ï¼Œæ”¯æŒä»å¤šç§æ•°æ®æºï¼ˆå¦‚å›¾åƒã€è§†é¢‘ã€å±å¹•æˆªå›¾ç­‰ï¼‰åŠ è½½æ•°æ®ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„é¢„å¤„ç†ã€‚
- **æ¨¡å‹å®šä¹‰**ï¼šé€šè¿‡`__init__.py`å’Œç›¸å…³æ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸åŒç±»å‹çš„YOLOæ¨¡å‹ï¼ˆå¦‚æ£€æµ‹ã€åˆ†ç±»ã€å§¿æ€ä¼°è®¡ç­‰ï¼‰ï¼Œå¹¶æä¾›äº†æ¨¡å‹çš„æ„å»ºå’Œæƒé‡åŠ è½½åŠŸèƒ½ã€‚
- **è®­ç»ƒè¿‡ç¨‹**ï¼š`train.py`æ–‡ä»¶è´Ÿè´£æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æŸå¤±è®¡ç®—ã€è®­ç»ƒç›‘æ§å’Œç»“æœå¯è§†åŒ–ã€‚
- **éªŒè¯è¿‡ç¨‹**ï¼šé€šè¿‡ä¸åŒçš„éªŒè¯å™¨ç±»ï¼Œæ”¯æŒå¯¹è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œè¯„ä¼°ï¼Œç¡®ä¿æ¨¡å‹çš„æ€§èƒ½ã€‚
- **ç”¨æˆ·ç•Œé¢**ï¼š`ui.py`æ–‡ä»¶æä¾›äº†ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯åŠ¨å’Œè¿è¡Œæ¨¡å‹ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                               | åŠŸèƒ½æè¿°                                                                                         |
|--------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| `ultralytics\data\loaders.py`                                                                          | æä¾›æ•°æ®åŠ è½½åŠŸèƒ½ï¼Œæ”¯æŒä»å¤šç§æ•°æ®æºåŠ è½½æ•°æ®ï¼ˆå›¾åƒã€è§†é¢‘ã€å±å¹•æˆªå›¾ç­‰ï¼‰ï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†ã€‚           |
| `ui.py`                                                                                                 | æä¾›ç”¨æˆ·ç•Œé¢ï¼Œå…è®¸ç”¨æˆ·å¯åŠ¨å’Œè¿è¡ŒæŒ‡å®šçš„Streamlitåº”ç”¨ã€‚                                          |
| `ultralytics\nn\__init__.py`                                                                           | åˆå§‹åŒ–YOLOæ¨¡å‹æ¨¡å—ï¼Œå¯¼å…¥æ¨¡å‹å’Œç›¸å…³åŠŸèƒ½ï¼Œå®šä¹‰å…¬å…±æ¥å£ã€‚                                         |
| `ultralytics\models\yolo\pose\__init__.py`                                                            | åˆå§‹åŒ–å§¿æ€ä¼°è®¡æ¨¡å—ï¼Œå¯¼å…¥å§¿æ€é¢„æµ‹ã€è®­ç»ƒå’ŒéªŒè¯ç›¸å…³çš„ç±»ã€‚                                         |
| `ultralytics\models\yolo\pose\predict.py`                                                             | å®ç°å§¿æ€é¢„æµ‹åŠŸèƒ½ï¼Œå¤„ç†æ¨¡å‹çš„é¢„æµ‹ç»“æœå¹¶è¿›è¡Œåå¤„ç†ã€‚                                             |
| `train.py`                                                                                              | è´Ÿè´£æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ¨¡å‹å±æ€§è®¾ç½®ã€æŸå¤±è®¡ç®—å’Œè®­ç»ƒç›‘æ§ç­‰ã€‚                      |
| `ultralytics\cfg\__init__.py`                                                                          | åˆå§‹åŒ–é…ç½®æ¨¡å—ï¼Œå¯èƒ½åŒ…å«æ¨¡å‹é…ç½®å’Œè¶…å‚æ•°è®¾ç½®ã€‚                                                |
| `ultralytics\utils\callbacks\raytune.py`                                                              | æä¾›ä¸Ray Tuneé›†æˆçš„å›è°ƒåŠŸèƒ½ï¼Œç”¨äºè¶…å‚æ•°ä¼˜åŒ–å’Œè®­ç»ƒç›‘æ§ã€‚                                       |
| `ultralytics\models\yolo\classify\val.py`                                                             | å®ç°åˆ†ç±»æ¨¡å‹çš„éªŒè¯åŠŸèƒ½ï¼Œè¯„ä¼°æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„æ€§èƒ½ã€‚                                            |
| `ultralytics\models\fastsam\predict.py`                                                                | å®ç°å¿«é€Ÿåˆ†å‰²æ¨¡å‹çš„é¢„æµ‹åŠŸèƒ½ï¼Œå¤„ç†è¾“å…¥æ•°æ®å¹¶è¿”å›åˆ†å‰²ç»“æœã€‚                                       |
| `ultralytics\data\build.py`                                                                             | å¯èƒ½ç”¨äºæ„å»ºæ•°æ®é›†æˆ–æ•°æ®å¤„ç†ç®¡é“ï¼Œæ”¯æŒæ•°æ®é¢„å¤„ç†å’Œå¢å¼ºã€‚                                       |
| `val.py`                                                                                                 | è´Ÿè´£æ¨¡å‹éªŒè¯è¿‡ç¨‹ï¼Œè¯„ä¼°è®­ç»ƒå¥½çš„æ¨¡å‹æ€§èƒ½ï¼Œå¯èƒ½ä¸ä¸åŒæ¨¡å‹ç±»å‹ç›¸å…³ã€‚                              |
| `ultralytics\utils\callbacks\clearml.py`                                                               | æä¾›ä¸ClearMLé›†æˆçš„å›è°ƒåŠŸèƒ½ï¼Œç”¨äºå®éªŒç®¡ç†å’Œç›‘æ§ã€‚                                              |

è¿™ä¸ªè¡¨æ ¼æ€»ç»“äº†é¡¹ç›®ä¸­å„ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªYOLOv8æ¡†æ¶çš„ç»“æ„å’Œå„ä¸ªç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuXlJtu](https://mbd.pub/o/bread/ZpuXlJtu)